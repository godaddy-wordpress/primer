!function(e){function t(){e(".primer-hero-text-widget input.link").each(function(){n.init(this)})}var n={init:function(t){if(e&&e.ui&&e.ui.autocomplete){var n,a,i=e(t);i.on("keydown",function(){i.removeAttr("aria-activedescendant")}).autocomplete({source:function(t,i){if(a!==t.term){if(/^https?:/.test(t.term)||-1!==t.term.indexOf("."))return i();e.post(window.ajaxurl,{action:"wp-link-ajax",page:1,search:t.term,_ajax_linking_nonce:primer_hero_text_widget._ajax_linking_nonce},function(e){n=e,i(e)},"json"),a=t.term}else i(n)},focus:function(e,t){i.attr("aria-activedescendant","mce-wp-autocomplete-"+t.item.ID),e.preventDefault()},select:function(e,t){return i.val(t.item.permalink),i.trigger("change"),!1},open:function(){i.attr("aria-expanded","true")},close:function(){i.attr("aria-expanded","false")},minLength:2,position:{my:"left top+2"}}).autocomplete("instance")._renderItem=function(t,n){return e('<li role="option" id="primer-hero-autocomplete-'+n.ID+'">').append("<span>"+n.title+'</span>&nbsp;<span style="float:right">'+n.info+"</span>").appendTo(t)},i.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":i.autocomplete("widget").attr("id")}).on("focus",function(){var e=i.val();e&&!/^https?:/.test(e)&&i.autocomplete("search")}).autocomplete("widget").attr("role","listbox").removeAttr("tabindex").on("menufocus",function(e,t){t.item.attr("aria-selected","true")}).on("menublur",function(){e(this).find('[aria-selected="true"]').removeAttr("aria-selected")})}}};e(document).ready(t),e(document).on("primer.widgets.change",t)}(jQuery);